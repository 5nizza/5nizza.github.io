---
layout: post
title: Balzaminov's Marriage, or Stable Mercenary Marriages
status: draft
---

<p>The original (in Russian): <a href="http://kvantik12.livejournal.com/16675.html">http://kvantik12.livejournal.com/16675.html</a></p>
<p><a href="http://arthaali.files.wordpress.com/2013/03/0.jpg"><img class="size-full wp-image-122 aligncenter" alt="0" src="assets/0.jpg" width="511" height="638" /></a></p>
<p><!--more--></p>
<p>-- Today started our long space flight -- started the captain of the first intergalactic spacecraft "Earth - Andromeda", -- We are here, as you know, 50 men and 50 women, and flying we for the next 50 years. So everybody should create a family. We are all not married and should get married here -- this was a requirement of the participation in the flight.</p>
<p>-- We remember this, and some of us will be happy to get married even today. We know each other at least for one year.</p>
<p>-- Alright. But I think that get married should everybody, and in such a way that no adulteries will be on the spacecraft.</p>
<p>People burst in a hearty laugh..</p>
<p>-- Captain, you are an idealist -- said someone.</p>
<p>-- I am quite realistic. -- smiled the captain, -- It is impossible on the Earth, but we could manage this on our spacecraft.</p>
<p>-- How? -- everybody continued laughing</p>
<p>-- Can I ask something? -- the captain was unyielding, -- Why is it that a married man <em>A</em> deceives his woman with a married lady <em>O</em>?</p>
<p>-- What is so unclear here, the captain? Because they like each more than their spouses!</p>
<p>-- And <em>A</em> just easily finds a babe who prefers him to her husband?</p>
<p>-- Simplicity itself! -- Some already went under with the laugh.</p>
<p>-- But that is on the Earth! -- the captain looked at people strictly and the laugh vanished itself. -- But I am going to marry you in such a way, that no man <em>A</em> will be able to find woman <em>O</em>, who will prefer him to his husband and who will be prettier than his own wife.</p>
<p>-- You mean, the captain, that each such a woman <em>O</em> who pleases that man <em>A</em> more than his own wife, each such woman does not like the man <em>A</em>? Or at least not more than her own husband?</p>
<p>-- Exactly. And vice versa. Man <em>A</em> prefers his own wife to any other woman who is ready to flirt with him.</p>
<p>-- Nice idea, captain! If you accomplish this you will solve the problem of century of stability of couples. But we still think that it is impossible.</p>
<p>-- But can I try? -- asked suavely the captain suavely.</p>
<p>-- Why not, that will be fun!</p>
<p>-- Wonderful! Then lets start immediately. Today each man should chose the woman, who he likes more than anyone else, and write here a letter: ask her hand.</p>
<p>-- But then all will chose Diana! -- Diana Brown was a recognized beauty. Many were in love with her, but a few hoped to marry her.</p>
<p>-- First, that is not everybody. For example, not me. Besides, it does not play any role. You have to woo, even if you have no chance. Chose the woman of your dreams. However, that is only the beginning. We will continue tomorrow. But now you should write your first letter. And don't think about possible rejection. Just chose the most beloved woman. And remember: this is an order. Everyone should chose and woo!</p>
<p>Not many men could sleep this night. Chose the woman of your dreams. Not simple at all! And also, she could just reject. Perhaps, that is good that this is an order, otherwise many could not venture to woo. And many choose Diana.</p>
<p><a href="http://arthaali.files.wordpress.com/2013/03/1.jpg"><img class="size-full wp-image-125 aligncenter" alt="1" src="assets/1.jpg" width="600" height="179" /></a></p>
<p>The captain could not also sleep well this night. Mary, the woman he secretly loved, already chose another man a long time ago.</p>
<p>-- But I must write Mary. -- sighed the captain sorely and started his letter. The next day all the people met in the hall. Many women were silent and grievous.</p>
<p>-- I see not all got their letters, -- noted the cap and several sighs were the answer to him.</p>
<p>-- .. and some got more than one letter. -- several women gaily nodded their approval. He caught Mary out of the corner of his eye. -- Now it is our turn to chose! Every woman who received more than one letter should chose only one man.</p>
<p>-- And marry him?</p>
<p>-- No, I didn't say that. But what you should do is to reply to all other letters and write that you will never marry them. I think this is reasonable.</p>
<p>-- These men should know that you prefer someone else more than them.</p>
<p>-- Only that?</p>
<p>-- Yes. And wait for tomorrow.</p>
<p>-- Then Diana should write many many letters! -- joked someone in the hall. But Diana didn't look cheerful.</p>
<p>-- Can I answer to all of them? -- asked Diana. "Seems she didn't get a letter from a beloved one", thought the cap, and said aloud:</p>
<p>-- No. You should answer to all except the best one. That is only the beginning. We are only trying to filter out for sure unstable marriages. -- tried to comfort her the cap. In the last moment he dared to look up at Mary. She smiled to him sympathetically and he understood that tomorrow he will get a sorrow letter from her.</p>
<p>A few people managed to sleep this night. Women who could chose were thinking, the ones without a choice cried. Men.. Men were waiting and could not sleep neither.</p>
<p>The next day more than half of men received reply, and mostly -- from Diana. The letters were polite but hopeless. The captain also received the letter from Mary. After breakfast all met together and the cap said:</p>
<p>-- Today many of us received a letter. It means that we, - the cap glanced at Mary, -- have no chances for a stable marriage with our fiancée. I think that is better to know before than after.</p>
<p>-- You are right, cap! -- agreed many.</p>
<p>-- But do you know what to do now?</p>
<p>-- No, cap.</p>
<p>-- First, forget that woman. You will never marry her. Second, chose the best out of the rest and ask her for a hand!</p>
<p><a href="http://arthaali.files.wordpress.com/2013/03/2.jpg"><img class="size-full wp-image-131 aligncenter" alt="2" src="assets/2.jpg" width="600" height="180" /></a></p>
<p>-- It means, that we can still get a new letter? -- asked women hopefully.</p>
<p>-- Yes. And may be not the only!</p>
<p>-- And the ones who already received the letter can also receive a new letter?</p>
<p>-- Yes. But with one exception, that you will not receive the letters from ones you already rejected. But unlikely you need them.</p>
<p>-- Cap, you are smarter than we thought!</p>
<p>New hopes -- new joys. The women revived.</p>
<p>-- But the man was not rejected, does it mean that he can already order the rings? -- asked a satisfied man. Many guessed that he was the one who wrote a letter do Diana but didn't received a sorrow reply.</p>
<p>-- No, cap didn't bear this in mind. You just have a good chance, but it is still necessary to wait. -- answered Diana to the surprise of all people.</p>
<p>-- Perfectly right. -- confirmed the cap. -- But if you want you can still write to that woman again.</p>
<p>-- And I will do so!</p>
<p>New choice -- new hopes. But this time many slept well. Only ones who received a reject, were thinking. And the cap was among them.</p>
<p>-- And why did I start this? -- asked himself the cap. -- Myself killed my hope... However I sill have to chose another woman. And receive another answer. And to be honest -- if I have to forget about Mary -- then Diana is the best among others. And he wrote the letter to Diana.</p>
<p>The next day many women were smiling and Diana glowed of joy.</p>
<p>"She might have received the letter from the beloved one as she hoped" -- thought the captain, and said aloud:</p>
<p>-- The women who received -- do you know what to do now?</p>
<p>-- Chose the best and answer to others.</p>
<p>-- Good girls!</p>
<p>-- But cap, how long are we going to write and chose?</p>
<p>-- Until every women gets at least one letter. And then the best among them will be from your future husband. And this will be a stable marriage. Think why.</p>
<p>-- Cap, -- said Mary, -- I think I finally got your idea. You mean, that we, women, will not be unfaithful, just because the ones with whom we could change don't like us: they didn't write us a letter, and they have someone better. But if no women will be unfaithful, then no men could be!</p>
<p>-- Excellent argument!</p>
<p>-- May I ask? -- said Diana, -- Does it mean, that I will be married to that only man, who I love, if he already wrote me?</p>
<p><a href="http://arthaali.files.wordpress.com/2013/03/3.jpg"><img class="size-full wp-image-132 aligncenter" alt="3" src="assets/3.jpg" width="600" height="179" /></a></p>
<p>-- You can be sure about this. To all others you will rejects anyway!</p>
<p>-- Then why should I wait?</p>
<p>-- Just for all other to get their letters too..</p>
<p>-- But can I already say to my future helpmeet that I chose him for ever?</p>
<p>-- I think you should also say this to others. Then they will stop writing you letters and find their halves quicker.</p>
<p>-- Then I don't want to write any letters any more! -- said Diana and gently kissed the fluttered captain.</p>
<p>***</p>
<p>&nbsp;</p>
<p>Хочется верить, что читатель понял ту математическую проблему, которая лежит в основе этой сказки. Мы надеемся, читатель согласится, что это — красивое решение, и спросит себя: как его можно использовать? И как решать похожие проблемы? Например, что будет, если женщин больше, чем мужчин, или если есть мужчины, которые скорее умрут, чем женятся? А если женщины будут писать первыми, будет ли решение тем же самым? Если же читатель задумается: «Правда ли это? Могу ли я, например, доказать, что все найдут себе супруга?» — значит, он начал думать как математик. А тогда несколько задач должны быть приятным дополнением к сказке.</p>
<p>1. Сформулируйте задачу строго математически. Это может оказаться сложнее, чем ожидалось. Не отступайте! Начните так: даны две квадратные таблицы размером <i>n x n</i>. В каждой строке каждой из таблиц стоят все числа от 1 до <i>n</i> в каком-то порядке...</p>
<p>2. Напишите чёткий алгоритм, который соответствует решению в сказке, и покажите, что он всегда работает.</p>
<p>3. Покажите, что бывают случаи, когда задача имеет несколько решений.</p>
<p>4. Предположим теперь, что таблицы бесконечные, занумерованы натуральными числами и что в каждой строке есть все натуральные числа. Можно ли тогда доказать существование решения, если предполагать, что в каждой строке кандидаты расположены в порядке убывания предпочтения (в частности, на первом месте каждой строки стоит номер самого лучшего кандидата)?</p>
<p>5. А если порядок противоположный?</p>
<p>6. Рассмотрите ещё и такой алгоритм для исходной (конечной) задачи. Разрешим разводы. Выстроим всех мужчин в очередь. Первый в очереди сватается ко всем женщинам по очереди в порядке своего предпочтения (независимо от того, замужем очередная кандидатура или нет) до тех пор, пока кто-то не согласится. Они женятся, и если женщина была замужем, то она сначала разводится, а её бывший супруг становится в конец очереди. Верно ли, что:</p>
<p>а) такая женщина всегда найдётся;</p>
<p>б) процесс закончится;</p>
<p>в) получившиеся браки будут стабильными?</p>
<p>г) Годится ли такой подход для бесконечных случаев?</p>
<p>Additional resources:<br />
<a href="http://en.wikipedia.org/wiki/Stable_marriage_problem">http://en.wikipedia.org/wiki/Stable_marriage_problem</a><br />
<a title="Magazine Kvantik (in ru)" href="http://kvantik.com/" target="_blank">http://kvantik.com/</a></p>
